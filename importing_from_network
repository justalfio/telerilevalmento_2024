# importing data from external sources

library(terra)
library(imageRy)

usiamo una funzione, per spiegare al sistema quale cartella uzare per caricare i dati, dato che usiamo qualcosa al di fuori di R bisogna usare sempre le virgolette.
quello che windows usa è il backslash, ma noi dobbiamo usare lo slash normale (/)

setwd("C:/Users/Utente/Downloads")
# make use slash not backslash: C:\Users\Utente\Downloads, use instead --> C:/Users/Utente/Downloads

# usiamo uin altra funzione, rest function terra, che serve per creare degli oggetti, raster spaziale
rast("")
# read the data
eclissi<-rast("eclissi.png")
[rast] unknown extent  è normale perché non è georeferenziata, quindi è presente solo a livello spaziale. 

# facciamo un plot di questa immagine, 1 ,2 ,3 si usano perché manteniamo l'originale
im.plotRGB(eclissi, 1, 2, 3)
> im.plotRGB(eclissi, 1, 2, 3)
> im.plotRGB(eclissi, 1, 3, 2)
> im.plotRGB(eclissi, 2, 3, 1)
> im.plotRGB(eclissi, 2, 1, 3)
# diverse visualizzazioni cambiando l'ordine dei colori

#plot è una funzione di terra, plotRGB usa tutte e tre le parti.

# band difference 
dif =  eclissi[[1]] - eclissi[[2]]
plot(dif)

# importiamo un'altra immagine
setwd("C:/Users/Utente/Downloads")
hurricane-->rast("hurricane.jpeg")
im.plotRGB(hurricane, 1, 2, 3)

# copernicus, cosa è? 4 blocchi principali di dati, vegetazione(con indici spettrali), energia, water e criosphere. 
# VEGETATION: prima variabile, leaf area index di una pianta, stimato da satellite anche se si fa a terra.
# seconda variabile: frazione FCOVER, la copertura fotosintetica, rappresenta estensione orizzontale vegetazione;
# terza: FAPAR quanittà di radiazione che partecipa alla fotosintesi, assorbita dunque da piante."Cosmologia da tasca, libro consigliato)
# NDVI differenza fra infrarosso e rosso divisa la loro somma; condizione di salute che indica qual è il valore di NDVI in funzione di una serie temporale;
# produttività VPI in a long term statistic, quanta biomassa viene prodotta;
# DMP produttività secca, misurata la quantità di biomassa una votla seccata la pianta dall'acqua.
# area incendiata burnt area;
# soil water index, umidità suolo a vari livelli di profondità;
# SSM surface soil moisture, limitata al primo strato di suolo

#ENERGY: TOC Reflectance, riflettanza della parte superiore degli oggetti;
# Surface albedo, considera gli oggetti anche se ci fossero buchi e altri elementi, quanità di radiazione riflessa;
#LST land surface temperature, temperatura del suolo NON ARIA.
WATER VARIABILI:
# LAKE WATER QUALITY
#WATER BODIES, misurare le aree coperte dall'acqua.
# Water level, stima livello verticale e riflettanza dei disciolti;

# CRIOSFERA: 
# Estensione ghiaccio, lake ice extent: 
# snow cover, quantità di estensione della neve in pianeta;
# LAKE ICE EXTENT, ghiaccio nei laghi
# Equivalente in acqua della neve.

#importing data from COpernicus
cambiare setdw da dove prendiamo il file
soil<-rast("c_gls_SSM1km_202404210000_CEURO_S1CSAR_V1.2.1.nc")
plot(soil)

# cropping data
ext <- c(25, 30, 55, 58) definite x min e max, y min e max, indica l'aggiunta dell'estensione che ci interessa
soilcrop <- crop(soil, ext)
plot(soilcrop)
plot(soilcrop[[1]])

 


